<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malik Faza Retouch - Professional Portfolio</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, writeBatch } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- 1. KONFIGURASI FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyAAHJUfWFvnAnhaPlpzjWFfwmACutmL17c",
            authDomain: "porto-9b4a4.firebaseapp.com",
            projectId: "porto-9b4a4",
            storageBucket: "porto-9b4a4.firebasestorage.app",
            messagingSenderId: "566977124414",
            appId: "1:566977124414:web:0040402e6b4837862d196f",
            measurementId: "G-GQ9LE3M62K"
        };

        // --- 2. INISIALISASI & GLOBAL STATE ---
        let app, auth, db;
        let isOnline = false;
        let currentUser = null;
        let allItems = [];
        const appId = 'default-app-id';

        // Helper: Tampilkan pesan toast
        window.showToast = (message, type = 'success') => {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-4 right-4 px-6 py-3 rounded shadow-lg text-white transform transition-all duration-300 translate-y-10 opacity-0 z-[100] ${type === 'error' ? 'bg-red-600' : 'bg-green-600'}`;
            toast.innerText = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.classList.remove('translate-y-10', 'opacity-0'), 10);
            setTimeout(() => {
                toast.classList.add('translate-y-10', 'opacity-0');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        };

        // --- 3. AUTH LOGIC (DENGAN FALLBACK) ---
        async function startApp() {
            try {
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
                
                await signInAnonymously(auth);
                isOnline = true;
                
                onAuthStateChanged(auth, (user) => {
                    currentUser = user;
                    if (user) setupDataListener();
                });

            } catch (error) {
                console.error("Firebase Error:", error);
                let msg = "Mode Offline Aktif";
                if(error.code === 'auth/unauthorized-domain') msg = "Domain belum diizinkan di Firebase Console";
                window.showToast(msg, "error");
                loadStaticData(); // Tetap load data statis biar web gak kosong
            }
        }

        startApp();

        // --- 4. DATA LISTENER ---
        function setupDataListener() {
            if (!currentUser) return;
            const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'gallery_items');
            
            // Timeout penjaga: Jika 5 detik gak ada data, load statis
            const safetyTimer = setTimeout(() => {
                if (allItems.length === 0) loadStaticData();
            }, 5000);

            onSnapshot(colRef, (snapshot) => {
                clearTimeout(safetyTimer);
                allItems = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                refreshUI(allItems);
            }, (err) => {
                console.error(err);
                loadStaticData();
            });
        }

        // --- 5. DATA STATIS (FALLBACK) ---
        function loadStaticData() {
            // Data ini muncul kalau database error/kosong
            const staticData = [
                { section: 'hero', title: "Potret Studio", category: "Retouch", isStatic: true, after: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=800", before: "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=800" },
                { section: 'hero', title: "Urban City", category: "Color", isStatic: true, after: "https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=800", before: "https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?w=800" },
                { section: 'gallery', title: "Wedding Moment", category: "Wedding", after: "https://images.unsplash.com/photo-1519741497674-611481863552?w=600", before: "https://images.unsplash.com/photo-1511285560982-1351cdeb9821?w=600" },
                { section: 'gallery', title: "Beauty Portrait", category: "Retouch", after: "https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600", before: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=600" },
                { section: 'gallery', title: "Nature Landscape", category: "Nature", after: "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=600", before: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=600" }
            ];
            refreshUI(staticData);
        }

        function refreshUI(items) {
            // Pisahkan Hero dan Gallery
            const heroItems = items.filter(i => i.section === 'hero');
            const galleryItems = items.filter(i => i.section !== 'hero');
            
            // Render (Fungsi render ada di script bawah)
            if(window.renderHero) window.renderHero(heroItems);
            if(window.renderGallery) window.renderGallery(galleryItems);
        }

        // --- 6. ADMIN ACTIONS (Export ke Window agar bisa dipanggil HTML) ---
        window.saveItemFirebase = async (data, editId) => {
            if (!isOnline || !currentUser) {
                window.showToast("Mode Offline: Data tidak tersimpan ke server", "error");
                return;
            }
            try {
                const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'gallery_items');
                if (editId) {
                    await updateDoc(doc(colRef, editId), data);
                    window.showToast("Update Berhasil!");
                } else {
                    await addDoc(colRef, { ...data, createdAt: Date.now() });
                    window.showToast("Simpan Berhasil!");
                }
                window.closeModal();
            } catch (e) {
                window.showToast("Gagal simpan: " + e.message, "error");
            }
        };

        window.deleteItemFirebase = async (id) => {
            if (!isOnline) return;
            try {
                await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'gallery_items', id));
                window.showToast("Terhapus!");
            } catch (e) {
                window.showToast("Gagal hapus", "error");
            }
        };
        
        window.exportDataJson = () => {
            const dataStr = JSON.stringify(allItems, null, 2);
            const blob = new Blob([dataStr], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `backup_porto.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };

        window.importDataJson = (file) => {
            const reader = new FileReader();
            reader.onload = async (ev) => {
                try {
                    const data = JSON.parse(ev.target.result);
                    const batch = writeBatch(db);
                    const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'gallery_items');
                    data.forEach((item, i) => {
                        const { id, ...clean } = item;
                        const newRef = doc(colRef);
                        batch.set(newRef, { ...clean, createdAt: Date.now() + i });
                    });
                    await batch.commit();
                    window.showToast("Import Sukses!");
                } catch(e) { window.showToast("Gagal Import", "error"); }
            };
            reader.readAsText(file);
        };

    </script>

    <!-- Style One Click Interaction -->
    <style>
        .img-comp-container { position: relative; height: 400px; overflow: hidden; border-radius: 1rem; user-select: none; }
        .img-comp-img { position: absolute; width: auto; height: 100%; overflow: hidden; top: 0; left: 0; }
        .img-comp-img img { display: block; height: 100%; object-fit: cover; }
        .img-comp-slider {
            position: absolute; z-index: 9; cursor: ew-resize; width: 40px; height: 40px;
            background-color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        /* One Click Classes */
        .click-card .img-before { opacity: 0; transition: opacity 0.3s; }
        .click-card .img-after { opacity: 1; transition: opacity 0.3s; }
        .click-card.active .img-before { opacity: 1; }
        .click-card.active .img-after { opacity: 0; }
        .click-card.active .info-badge { display: none; }
    </style>
</head>
<body class="bg-light-base text-gray-800 dark:bg-dark-base dark:text-gray-100 transition-colors duration-300">

    <!-- Login Modal -->
    <div id="login-modal" class="hidden fixed inset-0 z-[110] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">
        <div class="bg-white dark:bg-dark-card w-full max-w-sm rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-white/10">
            <h3 class="text-xl font-bold mb-4 text-center">Admin Access</h3>
            <form onsubmit="checkLogin(event)" class="space-y-4">
                <input type="password" id="admin-pass" class="w-full rounded-lg bg-gray-50 border p-2.5" placeholder="Password" required>
                <div class="flex space-x-2">
                    <button type="button" onclick="closeLoginModal()" class="flex-1 px-4 py-2 bg-gray-200 rounded-lg">Batal</button>
                    <button type="submit" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg">Login</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="data-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 overflow-y-auto">
        <div class="bg-white dark:bg-dark-card w-full max-w-2xl rounded-2xl shadow-2xl p-6 border my-8">
            <h3 id="modal-title" class="text-xl font-bold mb-6">Edit Foto</h3>
            <form id="item-form" onsubmit="handleSubmit(event)" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm">Judul</label>
                        <input type="text" id="inp-title" class="w-full border p-2 rounded" required>
                    </div>
                    <div>
                        <label class="text-sm">Kategori</label>
                        <select id="inp-category" class="w-full border p-2 rounded">
                            <option>Wedding</option><option>Portrait</option><option>Landscape</option><option>Urban</option>
                            <option>Fashion</option><option>Retouch</option><option>Color Grade</option>
                        </select>
                    </div>
                </div>
                <!-- Hidden Section Select -->
                <select id="inp-section" class="hidden"><option value="gallery">Gallery</option><option value="hero">Hero</option></select>
                
                <div class="grid grid-cols-2 gap-4">
                    <div onclick="document.getElementById('file-before').click()" class="border-dashed border-2 rounded-xl h-32 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50">
                        <span class="text-xs text-gray-500">Foto BEFORE (Asli)</span>
                        <input type="file" id="file-before" class="hidden" accept="image/*" onchange="handleFile(this.files[0], 'before')">
                        <img id="preview-before" class="h-20 w-20 object-cover mt-2 hidden">
                    </div>
                    <div onclick="document.getElementById('file-after').click()" class="border-dashed border-2 rounded-xl h-32 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50">
                        <span class="text-xs text-gray-500">Foto AFTER (Edit)</span>
                        <input type="file" id="file-after" class="hidden" accept="image/*" onchange="handleFile(this.files[0], 'after')">
                        <img id="preview-after" class="h-20 w-20 object-cover mt-2 hidden">
                    </div>
                </div>
                <div class="flex justify-end gap-2 pt-4">
                    <button type="button" onclick="window.closeModal()" class="px-4 py-2 text-gray-500">Batal</button>
                    <button type="submit" id="btn-save" class="px-6 py-2 bg-blue-600 text-white rounded-lg">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Navbar -->
    <nav class="fixed w-full z-50 top-0 bg-white/90 dark:bg-dark-base/90 backdrop-blur border-b dark:border-white/10">
        <div class="max-w-7xl mx-auto flex justify-between items-center p-4">
            <div class="text-2xl font-serif font-bold">Malik<span class="text-blue-500">Faza</span></div>
            <div class="flex items-center gap-4">
                <!-- Admin Menu -->
                <div id="admin-menu" class="hidden flex items-center gap-2 border-r pr-4 mr-2">
                    <button onclick="openAddModal()" class="text-xs bg-blue-600 text-white px-3 py-1 rounded-full">+ Tambah</button>
                    <button onclick="document.getElementById('json-import').click()" class="text-xs text-gray-500"><i class="fas fa-upload"></i></button>
                    <button onclick="exportDataJson()" class="text-xs text-gray-500"><i class="fas fa-download"></i></button>
                    <input type="file" id="json-import" class="hidden" onchange="importDataJson(this.files[0])">
                </div>
                
                <button onclick="requestAdmin()" id="btn-admin-lock" class="text-gray-400 hover:text-blue-500"><i class="fas fa-lock"></i></button>
                <a href="https://wa.me/6285161141114" class="px-4 py-2 bg-black text-white text-sm rounded-full">Kontak</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-32 pb-10 px-4">
        <div class="max-w-7xl mx-auto text-center mb-12">
            <h1 class="text-5xl font-serif font-bold mb-4">Professional <span class="text-blue-500">Retouching</span></h1>
            <p class="text-gray-500">Majalengka, Indonesia</p>
        </div>
        <div id="hero-grid" class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="text-center py-20 text-gray-400">Loading Hero...</div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="py-20 bg-gray-50 dark:bg-black/20">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-3xl font-serif font-bold mb-2">Galeri Karya</h2>
            <p class="text-sm text-gray-500 mb-8">Klik gambar untuk melihat Before/After</p>
            <div id="gallery-container" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="col-span-full text-center py-10 text-gray-400">Loading Gallery...</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 text-center text-gray-500 text-sm border-t dark:border-white/10">
        &copy; 2024 Malik Faza
    </footer>

    <!-- Main Logic -->
    <script>
        // State
        let isAdmin = false;
        let editId = null;
        let tempBefore = "";
        let tempAfter = "";

        // Global Render Functions (Dipanggil dari Module)
        window.renderHero = (items) => {
            const container = document.getElementById('hero-grid');
            if(!items || items.length === 0) return; // Jangan kosongkan jika data belum siap
            
            container.innerHTML = '';
            items.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = "bg-white dark:bg-dark-card p-1 rounded-2xl shadow-lg relative group";
                
                let btn = "";
                if(isAdmin) {
                    btn = `<div class="absolute top-4 right-4 z-20 flex gap-2">
                        <button onclick="openEdit('${item.id||''}', 'hero', '${item.title}', '${item.category}', '${item.before}', '${item.after}', ${item.isStatic||false})" class="bg-blue-600 text-white p-2 rounded text-xs">Edit</button>
                        ${!item.isStatic ? `<button onclick="deleteItemFirebase('${item.id}')" class="bg-red-600 text-white p-2 rounded text-xs">Hapus</button>` : ''}
                    </div>`;
                }

                div.innerHTML = `
                    ${btn}
                    <div class="p-2 flex justify-between items-center">
                        <h3 class="font-serif italic text-xl">${item.title}</h3>
                        <span class="text-xs font-bold px-2 py-1 bg-blue-100 text-blue-600 rounded">${item.category}</span>
                    </div>
                    <div class="img-comp-container h-[400px]">
                        <div class="img-comp-img w-full">
                            <img src="${item.after}" alt="After">
                            <span class="absolute bottom-4 right-4 bg-blue-500/80 text-white px-2 py-1 text-xs rounded">AFTER</span>
                        </div>
                        <div class="img-comp-img img-comp-overlay w-full">
                            <img src="${item.before}" alt="Before">
                            <span class="absolute bottom-4 left-4 bg-black/50 text-white px-2 py-1 text-xs rounded">BEFORE</span>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
            // Re-init slider
            setTimeout(initComparisons, 100);
        };

        window.renderGallery = (items) => {
            const container = document.getElementById('gallery-container');
            if(!items || items.length === 0) return;
            container.innerHTML = '';
            
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = "click-card relative rounded-xl overflow-hidden h-64 cursor-pointer shadow-md group";
                div.onclick = function() { this.classList.toggle('active'); };

                let btn = "";
                if(isAdmin) {
                    btn = `<div class="absolute top-2 left-2 z-20 flex gap-2" onclick="event.stopPropagation()">
                        <button onclick="openEdit('${item.id}', 'gallery', '${item.title}', '${item.category}', '${item.before}', '${item.after}')" class="bg-white text-blue-600 p-1 rounded shadow text-xs"><i class="fas fa-edit"></i></button>
                        <button onclick="deleteItemFirebase('${item.id}')" class="bg-white text-red-600 p-1 rounded shadow text-xs"><i class="fas fa-trash"></i></button>
                    </div>`;
                }

                div.innerHTML = `
                    ${btn}
                    <div class="absolute inset-0 bg-gray-900">
                        <img src="${item.after}" class="img-after w-full h-full object-cover">
                        <img src="${item.before}" class="img-before w-full h-full object-cover absolute top-0 left-0">
                    </div>
                    <div class="info-badge absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-3 text-white">
                        <p class="font-bold text-sm truncate">${item.title}</p>
                        <p class="text-xs text-blue-300">${item.category}</p>
                    </div>
                    <div class="absolute top-2 right-2 bg-black/30 backdrop-blur px-2 py-1 rounded text-[10px] text-white pointer-events-none">
                        Tap
                    </div>
                `;
                container.appendChild(div);
            });
        };

        // --- Slider Logic (Global) ---
        window.initComparisons = () => {
            const overlays = document.getElementsByClassName("img-comp-overlay");
            for (let i = 0; i < overlays.length; i++) {
                compareImages(overlays[i]);
            }
        };

        function compareImages(img) {
            if(img.classList.contains('init')) return;
            img.classList.add('init');
            
            let clicked = 0, w, h;
            const container = img.parentElement;
            
            // Wait for dimensions
            const check = setInterval(() => {
                w = container.offsetWidth;
                h = container.offsetHeight;
                if(w > 0) {
                    clearInterval(check);
                    buildSlider();
                }
            }, 100);

            function buildSlider() {
                img.style.width = (w / 2) + "px";
                const innerImg = img.querySelector('img');
                if(innerImg) { innerImg.style.width = w + "px"; innerImg.style.maxWidth = "none"; }

                const slider = document.createElement("DIV");
                slider.setAttribute("class", "img-comp-slider absolute z-10 w-10 h-10 bg-white rounded-full flex items-center justify-center cursor-ew-resize shadow-lg");
                slider.innerHTML = "<i class='fas fa-arrows-alt-h text-gray-600'></i>";
                container.insertBefore(slider, img);
                
                slider.style.top = (h / 2) - 20 + "px";
                slider.style.left = (w / 2) - 20 + "px";

                const start = (e) => { e.preventDefault(); clicked = 1; window.addEventListener("mousemove", move); window.addEventListener("touchmove", move); };
                const end = () => { clicked = 0; window.removeEventListener("mousemove", move); window.removeEventListener("touchmove", move); };
                
                slider.addEventListener("mousedown", start);
                slider.addEventListener("touchstart", start);
                window.addEventListener("mouseup", end);
                window.addEventListener("touchend", end);

                function move(e) {
                    if (clicked == 0) return false;
                    let a = container.getBoundingClientRect();
                    let x = (e.changedTouches ? e.changedTouches[0].pageX : e.pageX) - a.left - window.pageXOffset;
                    if (x < 0) x = 0;
                    if (x > w) x = w;
                    img.style.width = x + "px";
                    slider.style.left = x - 20 + "px";
                }
            }
        }

        // --- UI Interactions ---
        window.requestAdmin = () => document.getElementById('login-modal').classList.remove('hidden');
        window.closeLoginModal = () => document.getElementById('login-modal').classList.add('hidden');
        window.closeModal = () => document.getElementById('data-modal').classList.add('hidden');
        
        window.checkLogin = (e) => {
            e.preventDefault();
            if(document.getElementById('admin-pass').value === 'malikfaza99') {
                isAdmin = true;
                document.getElementById('admin-menu').classList.remove('hidden');
                document.getElementById('btn-admin-lock').classList.add('text-blue-500');
                closeLoginModal();
                showToast("Admin Aktif");
                // Trigger re-render by reloading current data if available, but simplest is let user click around
                // Or better, force reload via reload() but that resets state.
                // We'll rely on the user interacting or next update.
                // Actually, let's trigger a re-fetch or just re-render with current static data if offline
                // But better UX:
                alert("Mode Admin Aktif! Silakan refresh halaman atau tunggu data update.");
            } else {
                showToast("Password Salah", "error");
            }
        };

        window.openAddModal = () => {
            editId = null; tempBefore=""; tempAfter="";
            document.getElementById('modal-title').innerText = "Tambah Foto";
            document.getElementById('item-form').reset();
            document.getElementById('inp-section').value = "gallery";
            resetPreviews();
            document.getElementById('data-modal').classList.remove('hidden');
        };

        window.openEdit = (id, section, title, cat, bef, aft, isStatic) => {
            if(isStatic) { 
                editId = null; // Save as new
                showToast("Item statis: Akan disimpan sebagai item baru saat diedit.");
            } else {
                editId = id;
            }
            document.getElementById('modal-title').innerText = "Edit Foto";
            document.getElementById('inp-title').value = title;
            document.getElementById('inp-category').value = cat;
            document.getElementById('inp-section').value = section;
            
            tempBefore = bef; tempAfter = aft;
            document.getElementById('preview-before').src = bef;
            document.getElementById('preview-before').classList.remove('hidden');
            document.getElementById('preview-after').src = aft;
            document.getElementById('preview-after').classList.remove('hidden');
            
            document.getElementById('data-modal').classList.remove('hidden');
        };

        window.handleFile = (file, type) => {
            if(!file) return;
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = (e) => {
                // Compress logic simple
                const img = new Image();
                img.src = e.target.result;
                img.onload = () => {
                    const cvs = document.createElement('canvas');
                    const ctx = cvs.getContext('2d');
                    let w = img.width, h = img.height;
                    if(w > 800) { h *= 800/w; w = 800; }
                    cvs.width = w; cvs.height = h;
                    ctx.drawImage(img,0,0,w,h);
                    const res = cvs.toDataURL('image/jpeg', 0.7);
                    
                    if(type==='before') { tempBefore = res; document.getElementById('preview-before').src=res; document.getElementById('preview-before').classList.remove('hidden'); }
                    else { tempAfter = res; document.getElementById('preview-after').src=res; document.getElementById('preview-after').classList.remove('hidden'); }
                };
            };
        };

        function resetPreviews() {
            document.getElementById('preview-before').classList.add('hidden');
            document.getElementById('preview-after').classList.add('hidden');
        }

        window.handleSubmit = (e) => {
            e.preventDefault();
            if(!tempBefore || !tempAfter) { showToast("Wajib upload 2 foto!", "error"); return; }
            
            const data = {
                title: document.getElementById('inp-title').value,
                category: document.getElementById('inp-category').value,
                section: document.getElementById('inp-section').value,
                before: tempBefore,
                after: tempAfter
            };
            
            if(window.saveItemFirebase) window.saveItemFirebase(data, editId);
        };

        window.onresize = () => setTimeout(initComparisons, 200);
    </script>
</body>
</html>
